<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redevelopment Bazaar Score (RBS)</title>
   
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f8f9fa;
            padding: 20px;
        }
        .information{
            text-align: right;
        }

        .container {
            width: 600px;
            background: white;
           padding: auto;
            margin: auto;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }

        h1, h2, h3 {
            color: black;
        }

        .date {
            text-align: right;
            font-weight: bold;
        }

        .info p, .score-section p, .improve ol, .score-factors ul {
            font-size: 14px;
        }

        .score-section {
            text-align: center;
        }

        #score-meter {
           text-align: left;
        }

        button {
            background: #003366;
            color: white;
            padding: 10px 15px;
            border: none;
            cursor: pointer;
            display: block;
            margin: 20px auto 0;
        }

        button:hover {
            background: #0055a5;
        }
    </style>
</head>
<body>

    <div id="pdf-content" class="container">
        <!-- Header -->
        <header>
            <img src="Header.png" alt="Header" style="width: 100%; height: 100%;">
           
          
            <div class="information">
            
            <p class="date" id="current-date"></p>
        </div>
        </header>
        <section class="info">
            <h2>Current Application Information</h2>
            <p><strong>These are the details you give us when you apply for your RBS</strong></p>
            <p><strong>Society Name:</strong> <span id="society-name"></span></p>
            <p><strong>Address:</strong> <span id="address"></span></p>
            <p><strong>Email:</strong> <span id="email"></span></p>
            <p><strong>Remark:</strong> <span id="remark"></span></p>
        </section>

        <!-- Score Section -->
        <section class="score-section">
            <h2>Redevelopment Bazaar Score [RBS]</h2>
            <p>This is summarized as a Redevelopment Credit Score ranging from 300 - 850.</p>
            <img src="Score-Meter.png" alt="Score Meter" width="300">
        </section>

        <!-- Score Factors -->
        <section class="score-factors">
            <h3>Score Factors</h3>
            <ul>
                <li>Property Potential</li>
                <li>Developer Credibility</li>
                <li>Project Feasibility</li>
                <li>Financial Health</li>
                <li>Regulatory Compliance</li>
            </ul>
        </section>
        <section>
            <img src="Middle.png" alt="" width="100%">
        </section>
        <!-- Improvement Tips -->
        <section class="improve">
            <h3>How to Improve RBS?</h3>
            <ol>
                <li>Enhance Property Condition: Invest in property maintenance and upgrades.</li>
                <li>Partner with Reputable Developers: Collaborate with experienced and credible developers.</li>
                <li>Conduct Thorough Project Analysis: Assess project feasibility, regulatory compliance, and financial health.</li>
                <li>Maintain Regulatory Compliance: Ensure adherence to local regulations and permits.</li>
            </ol>
        </section>
        <section class="improve">
            <h3>BENEFITS OF RBS</h3>
            <ol>
                <li>Informed Decision-Making: Enables property owners, developers, and investors
                    to make informed decisions.</li>
                <li>Risk Assessment: Identifies potential risks and opportunities.</li>
                <li>Comparative Analysis: Facilitates comparison of different properties and
                    projects.</li>
                <li>Improved Collaboration: Enhances collaboration among stakeholders.</li>
            </ol>
        </section>
        <section class="improve">
            <h3>BENEFITS OF RBS TO OTHERS</h3>
            <ol>
                <li>Lenders: Assess creditworthiness and project viability.</li>
                <li>Investors: Evaluate investment potential and risk.</li>
                <li> Government Agencies: Monitor regulatory compliance and project feasibility.</li>
                <li>Consultants: Provide expert advice on redevelopment strategies.
                </li>
            </ol>
        </section>
        

        <!-- Contact -->
      
    <img src="Footer.png" alt="Footer" style="width: 100%; height: auto;">
        <button onclick="downloadPDF()">Download PDF</button>
    </div>

    <script>
        document.getElementById("current-date").innerText = new Date().toLocaleDateString();
        
        const societyName = localStorage.getItem("societyName") || "Not Provided";
        const email = localStorage.getItem("email") || "Not Provided";
        const address = localStorage.getItem("address") || "Not Provided";
        const remark = localStorage.getItem("remark") || "No remarks available";
        const score = parseInt(localStorage.getItem("finalScore")) || 600;
        
        document.getElementById("society-name").innerText = societyName;
        document.getElementById("email").innerText = email;
        document.getElementById("address").innerText = address;
         document.getElementById("remark").innerText = `Your adjusted score is ${score}`
        
        let meterImage = "meter_600.png";
        if (score < 600) {
            meterImage = "meter_400.png";
        } else if (score >= 750) {
            meterImage = "meter_750.png";
        }
        // document.getElementById("score-meter").src = meterImage;
        
        function downloadPDF() {
    const { jsPDF } = window.jspdf; // âœ… Fix: jsPDF ko correctly import karo
    const element = document.getElementById("pdf-content");

    html2canvas(element, { scale: 2 }).then((canvas) => {
        const imgData = canvas.toDataURL("image/png");
        const pdf = new jsPDF("p", "mm", "a4");

        const imgWidth = 210;
        const pageHeight = 297;
        const imgHeight = (canvas.height * imgWidth) / canvas.width;

        let heightLeft = imgHeight;
        let position = 0;

        pdf.addImage(imgData, "PNG", 0, position, imgWidth, imgHeight);
        heightLeft -= pageHeight;

        while (heightLeft > 0) {
            position -= pageHeight;
            pdf.addPage();
            pdf.addImage(imgData, "PNG", 0, position, imgWidth, imgHeight);
            heightLeft -= pageHeight;
        }

        pdf.save(`RBS_Report_${societyName}.pdf`);
    });
}


    </script>
</body>
</html>
